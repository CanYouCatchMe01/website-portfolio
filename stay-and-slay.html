<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Stay And Slay - Marcus Cazzola&#x27;s Portfolio</title><meta name="description" content="Details: A first person shooter inspired by Anger Foot. 15-week development (20h/week) with a team of 5 programmers, 2 level&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://cazzola.click/stay-and-slay.html"><link rel="alternate" type="application/atom+xml" href="https://cazzola.click/feed.xml"><link rel="alternate" type="application/json" href="https://cazzola.click/feed.json"><meta property="og:title" content="Stay And Slay"><meta property="og:image" content="https://cazzola.click/media/posts/10/StayAndSlayThumb.gif"><meta property="og:image:width" content="514"><meta property="og:image:height" content="338"><meta property="og:site_name" content="Marcus Cazzola's Portfolio"><meta property="og:description" content="Details: A first person shooter inspired by Anger Foot. 15-week development (20h/week) with a team of 5 programmers, 2 level&hellip;"><meta property="og:url" content="https://cazzola.click/stay-and-slay.html"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://cazzola.click/media/website/upside_down_studios-removebg-preview.png" type="image/x-icon"><link rel="shortcut icon" href="https://cazzola.click/media/website/upside_down_studios-removebg-preview.png" type="image/x-icon"><link rel="stylesheet" href="https://cazzola.click/assets/css/style.css?v=0a9074aada880923a6bee516c94ab1e6"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://cazzola.click/stay-and-slay.html"},"headline":"Stay And Slay","datePublished":"2023-04-03T09:28","dateModified":"2023-04-04T11:44","image":{"@type":"ImageObject","url":"https://cazzola.click/media/posts/10/StayAndSlayThumb.gif","height":338,"width":514},"description":"Details: A first person shooter inspired by Anger Foot. 15-week development (20h/week) with a team of 5 programmers, 2 level&hellip;","author":{"@type":"Person","name":"Marcus Cazzola","url":"https://cazzola.click/authors/marcus-cazzola/"},"publisher":{"@type":"Organization","name":"Marcus Cazzola","logo":{"@type":"ImageObject","url":"https://cazzola.click/media/website/Telos-logo-bg-removed.png","height":908,"width":794}}}</script></head><body class="lines"><div class="container lines lines--right"><header class="header"><a href="https://cazzola.click/" class="logo"><img src="https://cazzola.click/media/website/Telos-logo-bg-removed.png" alt="Marcus Cazzola&#x27;s Portfolio" width="794" height="908"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu">Menu</button><ul class="navbar__menu"><li><a href="https://cazzola.click/" target="_self">Home</a></li><li><a href="https://cazzola.click/vr-level-editor-with-openai-voice-commands.html" target="_self">Specialisation</a></li><li><a href="https://cazzola.click/tags/group-projects/" target="_self">Group Projects</a></li><li><a href="https://cazzola.click/tags/personal-projects/" target="_self">Personal Projects</a></li><li><a href="https://cazzola.click/about-me.html" target="_self">About Me</a></li></ul></nav></header><main class="main"><article class="post"><figure class="post__featured-image"><div class="post__featured-image__inner is-img-loading"><img src="https://cazzola.click/media/posts/10/StayAndSlayThumb.gif" loading="eager" height="338" width="514" alt=""></div></figure><header class="post__inner post__header"><h1 class="post__title">Stay And Slay</h1><div class="post__meta"><div class="post__meta__left"><a href="https://cazzola.click/authors/marcus-cazzola/" class="invert post__author" rel="author" title="Marcus Cazzola">Marcus Cazzola</a></div><div class="post__meta__right"><time datetime="2023-04-03T09:28" class="post__date">April 3, 2023</time><div class="post__updated">Updated on <time datetime="2023-04-03T09:28" class="post__date">April 4, 2023</time></div></div></div></header><div class="post__inner"><div class="post__entry"><h5>Details:</h5><h6></h6><h6></h6><ul><li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">A first person shooter inspired by Anger Foot.</span></li><li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">15-week development (20h/week) with a team of 5 programmers, 2 level designers and 5 3D artists.</span></li><li style="font-weight: 400;" aria-level="1"><span style="font-weight: 400;">Game is made in our own game engine made from a base of the schools in-house game engine.</span></li><li aria-level="1">Unity is used as a level editor.</li></ul><h5><strong>My contributions:</strong></h5><ul><li aria-level="1">PhysX implementation in our own engine.</li><li>Scene and scene stack pipeline.</li><li>Build system with MSBuild.</li><li>Multiple materials per model export support.</li><li style="font-weight: 400;" aria-level="1">In game cubemap capture.</li><li aria-level="1">Occlusion culling performance optimisation.</li><li aria-level="1">Rendering gun and hands in front of everything.</li><li aria-level="1">HUD UI elements.</li></ul><div class="post__iframe"><iframe loading="lazy" width="560" height="315" src="https://www.youtube.com/embed/bNVIAEfY9PI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" data-mce-fragment="1"></iframe></div><h5>PhysX implementationÂ in our own game engine:</h5><p>To get the complex physics simulation that our game needed desided we to use the physX C++ library from NVIDIA. I had to both integate PhysX into our ECS(Entity Component System) pipeline and learn all the important functionalists that we had to use in the project.</p><p>Each scene in our game owns a physX scene, where all the physX actors are stored. During the loading of a level each ECS Entity that should have physical behaviour gets a component that points to the right physX actor.</p><figure class="post__image"><img loading="lazy" src="https://cazzola.click/media/posts/10/physXDynamicLoad.PNG" alt="" width="2285" height="480" sizes="(min-width: 37.5em) 1600px, 80vw" srcset="https://cazzola.click/media/posts/10/responsive/physXDynamicLoad-xs.PNG 384w, https://cazzola.click/media/posts/10/responsive/physXDynamicLoad-sm.PNG 600w, https://cazzola.click/media/posts/10/responsive/physXDynamicLoad-md.PNG 768w, https://cazzola.click/media/posts/10/responsive/physXDynamicLoad-lg.PNG 1200w, https://cazzola.click/media/posts/10/responsive/physXDynamicLoad-xl.PNG 1600w"></figure><p>During each frame we update the ECS entity's transform to match the physX object's.</p><figure class="post__image"><img loading="lazy" src="https://cazzola.click/media/posts/10/physXUpdateSystem.PNG" alt="" width="654" height="163" sizes="(min-width: 37.5em) 1600px, 80vw" srcset="https://cazzola.click/media/posts/10/responsive/physXUpdateSystem-xs.PNG 384w, https://cazzola.click/media/posts/10/responsive/physXUpdateSystem-sm.PNG 600w, https://cazzola.click/media/posts/10/responsive/physXUpdateSystem-md.PNG 768w, https://cazzola.click/media/posts/10/responsive/physXUpdateSystem-lg.PNG 1200w, https://cazzola.click/media/posts/10/responsive/physXUpdateSystem-xl.PNG 1600w"></figure><p>This is the first prototype of the player character controller where he was able to walk up the slope if it was not that steep.</p><figure class="post__image"><img loading="lazy" src="https://cazzola.click/media/posts/10/character_controller.gif" alt="" width="684" height="254"></figure><h6>Unity collider position export challenge:</h6><p><span data-offset-key="2bdnr-61-0">One</span><span data-offset-key="2bdnr-62-0"> challenge</span><span data-offset-key="2bdnr-63-0"> I</span><span data-offset-key="2bdnr-64-0"> encountered</span><span data-offset-key="2bdnr-65-0"> when</span><span data-offset-key="2bdnr-66-0"> exporting</span><span data-offset-key="2bdnr-67-0"> the</span><span data-offset-key="2bdnr-68-0"> coll</span><span data-offset-key="2bdnr-69-0">ider</span><span data-offset-key="2bdnr-70-0"> local pose</span><span data-offset-key="2bdnr-71-0"> was</span><span data-offset-key="2bdnr-72-0"> that</span><span data-offset-key="2bdnr-73-0"> the</span><span data-offset-key="2bdnr-74-0"> displayed</span><span data-offset-key="2bdnr-75-0"> position</span><span data-offset-key="2bdnr-76-0"> of</span><span data-offset-key="2bdnr-77-0"> the</span><span data-offset-key="2bdnr-78-0"> coll</span><span data-offset-key="2bdnr-79-0">ider</span><span data-offset-key="2bdnr-80-0"> in</span><span data-offset-key="2bdnr-81-0"> Unity</span><span data-offset-key="2bdnr-82-0"> did</span><span data-offset-key="2bdnr-83-0"> not</span><span data-offset-key="2bdnr-84-0"> match</span><span data-offset-key="2bdnr-85-0"> up</span><span data-offset-key="2bdnr-86-0"> with</span><span data-offset-key="2bdnr-87-0"> the</span><span data-offset-key="2bdnr-88-0"> model,</span><span data-offset-key="2bdnr-89-0"> when</span><span data-offset-key="2bdnr-90-0"> a</span><span data-offset-key="2bdnr-91-0"> Game</span><span data-offset-key="2bdnr-92-0">Object</span><span data-offset-key="2bdnr-93-0"> was</span><span data-offset-key="2bdnr-94-0"> child</span><span data-offset-key="2bdnr-95-0">ed</span><span data-offset-key="2bdnr-96-0"> to</span><span data-offset-key="2bdnr-97-0"> multiple</span><span data-offset-key="2bdnr-98-0"> Game</span><span data-offset-key="2bdnr-99-0">Object</span><span data-offset-key="2bdnr-100-0">s</span><span data-offset-key="2bdnr-101-0"> with</span><span data-offset-key="2bdnr-102-0"> both</span><span data-offset-key="2bdnr-103-0"> scaling</span><span data-offset-key="2bdnr-104-0"> and</span><span data-offset-key="2bdnr-105-0"> rotation</span><span data-offset-key="2bdnr-106-0"> applied</span><span data-offset-key="2bdnr-107-0">.</span> This resulted in me have to do some ticky matix multiplication to get the colliders in our engine to the same position as the one in Unity.</p><p><span data-offset-key="2cli6-7-0">The</span><span data-offset-key="2cli6-8-0"> grey</span><span data-offset-key="2cli6-9-0"> objects</span><span data-offset-key="2cli6-10-0"> in</span><span data-offset-key="2cli6-11-0"> the</span><span data-offset-key="2cli6-12-0"> left</span><span data-offset-key="2cli6-13-0"> image</span><span data-offset-key="2cli6-14-0"> are</span><span data-offset-key="2cli6-15-0"> the</span><span data-offset-key="2cli6-16-0"> meshes</span><span data-offset-key="2cli6-17-0"> and</span><span data-offset-key="2cli6-18-0"> the</span><span data-offset-key="2cli6-19-0"> green</span><span data-offset-key="2cli6-20-0"> objects</span><span data-offset-key="2cli6-21-0"> are</span><span data-offset-key="2cli6-22-0"> their</span><span data-offset-key="2cli6-23-0"> coll</span><span data-offset-key="2cli6-24-0">iders</span><span data-offset-key="2cli6-25-0">.</span><span data-offset-key="2cli6-26-0"> Even</span><span data-offset-key="2cli6-27-0"> though</span><span data-offset-key="2cli6-28-0"> the</span><span data-offset-key="2cli6-29-0"> coll</span><span data-offset-key="2cli6-30-0">iders</span><span data-offset-key="2cli6-31-0"> should</span><span data-offset-key="2cli6-32-0"> be</span><span data-offset-key="2cli6-33-0"> in</span><span data-offset-key="2cli6-34-0"> the</span><span data-offset-key="2cli6-35-0"> centre</span><span data-offset-key="2cli6-36-0"> of</span><span data-offset-key="2cli6-37-0"> the</span><span data-offset-key="2cli6-38-0"> mesh</span><span data-offset-key="2cli6-39-0">,</span><span data-offset-key="2cli6-40-0"> they</span><span data-offset-key="2cli6-41-0"> are</span><span data-offset-key="2cli6-42-0"> not</span><span data-offset-key="2cli6-43-0"> because</span><span data-offset-key="2cli6-44-0"> their</span><span data-offset-key="2cli6-45-0"> parent</span><span data-offset-key="2cli6-46-0"> objects</span><span data-offset-key="2cli6-47-0"> are</span><span data-offset-key="2cli6-48-0"> scaled</span><span data-offset-key="2cli6-49-0"> and</span><span data-offset-key="2cli6-50-0"> rotated</span><span data-offset-key="2cli6-51-0">.</span><span data-offset-key="2cli6-52-0"> The</span><span data-offset-key="2cli6-53-0"> right</span><span data-offset-key="2cli6-54-0"> image</span><span data-offset-key="2cli6-55-0"> is</span><span data-offset-key="2cli6-56-0"> when</span><span data-offset-key="2cli6-57-0"> I</span><span data-offset-key="2cli6-58-0"> got</span><span data-offset-key="2cli6-59-0"> the</span><span data-offset-key="2cli6-60-0"> coll</span><span data-offset-key="2cli6-61-0">iders</span><span data-offset-key="2cli6-62-0"> to</span><span data-offset-key="2cli6-63-0"> be</span><span data-offset-key="2cli6-64-0"> in</span><span data-offset-key="2cli6-65-0"> the</span><span data-offset-key="2cli6-66-0"> same</span><span data-offset-key="2cli6-67-0"> position</span><span data-offset-key="2cli6-68-0"> in</span><span data-offset-key="2cli6-69-0"> our</span><span data-offset-key="2cli6-70-0"> game</span><span data-offset-key="2cli6-71-0"> engine</span><span data-offset-key="2cli6-72-0"> as</span><span data-offset-key="2cli6-73-0"> the</span><span data-offset-key="2cli6-74-0"> ones</span><span data-offset-key="2cli6-75-0"> in</span><span data-offset-key="2cli6-76-0"> Unity</span><span data-offset-key="2cli6-77-0">.</span></p><figure class="post__image"><img loading="lazy" src="https://cazzola.click/media/posts/10/collider-local-pose.png" alt="" width="1943" height="1140" sizes="(min-width: 37.5em) 1600px, 80vw" srcset="https://cazzola.click/media/posts/10/responsive/collider-local-pose-xs.png 384w, https://cazzola.click/media/posts/10/responsive/collider-local-pose-sm.png 600w, https://cazzola.click/media/posts/10/responsive/collider-local-pose-md.png 768w, https://cazzola.click/media/posts/10/responsive/collider-local-pose-lg.png 1200w, https://cazzola.click/media/posts/10/responsive/collider-local-pose-xl.png 1600w"></figure><p>This is an image of the code that calculated the collider local position.</p><figure class="post__image"><img loading="lazy" src="https://cazzola.click/media/posts/10/collider-export-code.PNG" alt="" width="647" height="373" sizes="(min-width: 37.5em) 1600px, 80vw" srcset="https://cazzola.click/media/posts/10/responsive/collider-export-code-xs.PNG 384w, https://cazzola.click/media/posts/10/responsive/collider-export-code-sm.PNG 600w, https://cazzola.click/media/posts/10/responsive/collider-export-code-md.PNG 768w, https://cazzola.click/media/posts/10/responsive/collider-export-code-lg.PNG 1200w, https://cazzola.click/media/posts/10/responsive/collider-export-code-xl.PNG 1600w"></figure><h5>Rendering gun and hands in front of everything</h5><p><span data-offset-key="b45i-49-0">In</span><span data-offset-key="b45i-50-0"> first</span><span data-offset-key="b45i-51-0">-</span><span data-offset-key="b45i-52-0">person</span><span data-offset-key="b45i-53-0"> video</span><span data-offset-key="b45i-54-0"> games</span><span data-offset-key="b45i-55-0">,</span><span data-offset-key="b45i-56-0"> a</span><span data-offset-key="b45i-57-0"> common</span><span data-offset-key="b45i-58-0"> issue</span><span data-offset-key="b45i-59-0"> is</span><span data-offset-key="b45i-60-0"> that</span><span data-offset-key="b45i-61-0"> the</span><span data-offset-key="b45i-62-0"> guns</span><span data-offset-key="b45i-63-0"> can</span><span data-offset-key="b45i-64-0"> clip</span><span data-offset-key="b45i-66-0"> into</span><span data-offset-key="b45i-67-0"> the</span><span data-offset-key="b45i-68-0"> walls</span><span data-offset-key="b45i-69-0">.</span><span data-offset-key="b45i-70-0"> To</span><span data-offset-key="b45i-71-0"> combat</span><span data-offset-key="b45i-72-0"> this</span><span data-offset-key="b45i-73-0">,</span><span data-offset-key="b45i-74-0"> developers</span><span data-offset-key="b45i-75-0"> often</span><span data-offset-key="b45i-76-0"> render</span><span data-offset-key="b45i-77-0"> the</span><span data-offset-key="b45i-78-0"> entire</span><span data-offset-key="b45i-79-0"> gun</span><span data-offset-key="b45i-80-0">,</span><span data-offset-key="b45i-81-0"> even</span><span data-offset-key="b45i-82-0"> when</span><span data-offset-key="b45i-83-0"> it</span><span data-offset-key="b45i-84-0"> is</span><span data-offset-key="b45i-85-0"> clipping</span><span data-offset-key="b45i-86-0"> into</span><span data-offset-key="b45i-87-0"> the</span><span data-offset-key="b45i-88-0"> wall</span><span data-offset-key="b45i-89-0">.</span></p><div class="row"><div class="column"><figure class="post__image"><img loading="lazy" src="https://cazzola.click/media/posts/10/no_late_render.gif" alt="" width="439" height="247"></figure></div><div class="column"><figure class="post__image"><img loading="lazy" src="https://cazzola.click/media/posts/10/with_late_render.gif" alt="" width="439" height="247"></figure></div></div><p><span data-offset-key="4ihpq-70-0">To</span><span data-offset-key="4ihpq-71-0"> solve</span><span data-offset-key="4ihpq-72-0"> this</span><span data-offset-key="4ihpq-73-0"> problem</span><span data-offset-key="4ihpq-74-0"> within</span><span data-offset-key="4ihpq-75-0"> our</span><span data-offset-key="4ihpq-76-0"> engine</span><span data-offset-key="4ihpq-77-0">,</span><span data-offset-key="4ihpq-78-0"> I</span><span data-offset-key="4ihpq-79-0"> first</span><span data-offset-key="4ihpq-80-0"> rendered</span><span data-offset-key="4ihpq-81-0"> the</span><span data-offset-key="4ihpq-82-0"> gun</span><span data-offset-key="4ihpq-83-0"> in</span><span data-offset-key="4ihpq-84-0"> its</span><span data-offset-key="4ihpq-85-0"> normal</span><span data-offset-key="4ihpq-86-0"> state</span><span data-offset-key="4ihpq-87-0">.</span><span data-offset-key="4ihpq-88-0"> Then</span><span data-offset-key="4ihpq-89-0">,</span><span data-offset-key="4ihpq-90-0"> I</span><span data-offset-key="4ihpq-91-0"> rendered</span><span data-offset-key="4ihpq-92-0"> the</span><span data-offset-key="4ihpq-93-0"> gun</span><span data-offset-key="4ihpq-94-0"> again</span><span data-offset-key="4ihpq-95-0"> with</span><span data-offset-key="4ihpq-96-0"> a</span><span data-offset-key="4ihpq-97-0"> depth</span><span data-offset-key="4ihpq-98-0">-</span><span data-offset-key="4ihpq-99-0">only</span><span data-offset-key="4ihpq-100-0"> pass</span><span data-offset-key="4ihpq-101-0">,</span><span data-offset-key="4ihpq-102-0"> writing</span><span data-offset-key="4ihpq-103-0"> a</span><span data-offset-key="4ihpq-104-0"> depth</span><span data-offset-key="4ihpq-105-0"> value</span><span data-offset-key="4ihpq-106-0"> of</span><span data-offset-key="4ihpq-107-0"> 0</span><span data-offset-key="4ihpq-108-0"> to</span><span data-offset-key="4ihpq-109-0"> the</span><span data-offset-key="4ihpq-110-0"> depth</span><span data-offset-key="4ihpq-111-0"> buffer</span><span data-offset-key="4ihpq-112-0">.</span><span data-offset-key="4ihpq-113-0"> This</span><span data-offset-key="4ihpq-114-0"> ensured</span><span data-offset-key="4ihpq-115-0"> that</span><span data-offset-key="4ihpq-116-0"> all</span><span data-offset-key="4ihpq-117-0"> objects</span><span data-offset-key="4ihpq-118-0"> rendered</span><span data-offset-key="4ihpq-119-0"> after</span><span data-offset-key="4ihpq-120-0"> would</span><span data-offset-key="4ihpq-121-0"> not</span><span data-offset-key="4ihpq-122-0"> be</span><span data-offset-key="4ihpq-123-0"> rendered</span><span data-offset-key="4ihpq-124-0"> on</span><span data-offset-key="4ihpq-125-0"> top</span><span data-offset-key="4ihpq-126-0"> of</span><span data-offset-key="4ihpq-127-0"> the</span><span data-offset-key="4ihpq-128-0"> gun</span><span data-offset-key="4ihpq-129-0">.</span></p><div class="row"><div class="column"><figure class="post__image"><img loading="lazy" src="https://cazzola.click/media/posts/10/depthFirstPass-2.gif" alt="" width="440" height="248"></figure></div><div class="column"><figure class="post__image"><img loading="lazy" src="https://cazzola.click/media/posts/10/depthSecondPass.gif" alt="" width="438" height="246"></figure></div></div><p>Â </p></div><footer class="post__footer"><div class="post__tag-share"><div class="post__tag"><h3 class="post__tag__title">Posted in</h3><ul class="post__tag__list"><li><a href="https://cazzola.click/tags/group-projects/">Group Projects</a></li></ul></div><div class="post__share"></div></div></footer></div></article></main><footer class="footer"><div class="footer__left"><div class="footer__copy"></div></div><div class="footer__right"><div class="footer__social"><a href="https://www.linkedin.com/in/marcus-cazzola-b7a36b21b/" aria-label="LinkedIn" class="linkedin"><svg><use xlink:href="https://cazzola.click/assets/svg/svg-map.svg#linkedin"/></svg> </a><a href="https://www.youtube.com/channel/UCnN4U3AmF5i7RSw0tYV9I0g" aria-label="Youtube" class="youtube"><svg><use xlink:href="https://cazzola.click/assets/svg/svg-map.svg#youtube"/></svg></a></div></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://cazzola.click/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = { mobileMenuMode: 'sidebar', animationSpeed: 300, submenuWidth: 'auto', doubleClickTime: 500, mobileMenuExpandableSubmenus: true, relatedContainerForOverlayMenuSelector: '.navbar', };</script><script defer="defer" src="https://cazzola.click/assets/js/scripts.min.js?v=c1a198ff73cac9a44e5644cc5a16e70d"></script><script>function publiiDetectLoadedImages () {
         var images = document.querySelectorAll('img[loading]:not(.is-loaded)');
         for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
               images[i].classList.add('is-loaded');
               images[i].parentNode.classList.remove('is-img-loading');
            } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
                  this.parentNode.classList.remove('is-img-loading');
               }, false);
            }
         }
      }
      publiiDetectLoadedImages();</script></body></html>